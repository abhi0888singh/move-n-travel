<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - Move N Travel</title>

  <link rel="stylesheet" href="./css/style.css" />
</head>

<body>

  <form id="loginForm">

    <h2>Login to MOVE N TRAVEL</h2>

    <input type="email" id="email" placeholder="Email" required />

    <input type="password" id="password" placeholder="Password" required />

    <!-- ✅ Forgot Password -->
    <p style="text-align:right; margin-top:5px;">
      <a href="#" id="forgotPass">Forgot Password?</a>
    </p>

    <button type="submit" class="btn">Login</button>

    <p style="text-align:center; margin-top:15px;">
      Don’t have an account?
      <a href="signup.html">Sign up</a>
    </p>

  </form>


  <script type="module">

    import { auth } from "./js/firebase.js";

    import {
      signInWithEmailAndPassword,
      sendPasswordResetEmail
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";


    // ✅ Login Form
    const form = document.getElementById("loginForm");

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      signInWithEmailAndPassword(auth, email, password)
        .then(() => {
          alert("Login Successful ✅");
          window.location.href = "dashboard.html";
        })
        .catch((error) => {
          alert("Login Error: " + error.message);
        });
    });


    // ✅ Forgot Password Reset
    const forgotBtn = document.getElementById("forgotPass");

    forgotBtn.addEventListener("click", (e) => {
      e.preventDefault();

      const email = document.getElementById("email").value;

      if (!email) {
        alert("Enter your email first!");
        return;
      }

      sendPasswordResetEmail(auth, email)
        .then(() => {
          alert("Password reset link sent to your email ✅");
        })
        .catch((error) => {
          alert("Reset Error: " + error.message);
        });
    });

  </script>

</body>
</html>
